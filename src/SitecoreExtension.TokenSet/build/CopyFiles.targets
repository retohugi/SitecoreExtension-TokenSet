<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll"/>

    <Target Name="DoCopyFiles">
      <Message Text="> DoCopyFiles Target invoked" Importance="high" />
        <!-- copy everything but the folders from the exclude list to the deployment directory -->
        <ItemGroup>
            <AppConfigFiles Include="App_Config\**\*.config" />
            <Binaries Include="bin\SitecoreExtension.*" Exclude="**\.svn\**;bin\*.xml;bin\*.pdb" />
        </ItemGroup>

        <Copy SourceFiles="@(AppConfigFiles)" DestinationFiles="@(AppConfigFiles->'$(DeployDir)\$(Environment)\App_Config\%(RecursiveDir)%(Filename)%(Extension)')" SkipUnchangedFiles="True" />
        <Copy SourceFiles="@(Binaries)" DestinationFiles="@(Binaries->'$(DeployDir)\$(Environment)\bin\%(RecursiveDir)%(Filename)%(Extension)')" SkipUnchangedFiles="True" />
    </Target>

</Project>
